<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>ScamSentinel Gemini</title>

<script src="https://cdn.tailwindcss.com"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

<style>
body{
  min-height:100vh;
  background:#0f172a;
  color:white;
  overflow-y:auto;
  font-family:system-ui;
}
.glass{
  background:rgba(30,41,59,0.7);
  backdrop-filter:blur(10px);
  border:1px solid rgba(255,255,255,0.1);
}
.red-flag{color:#f87171;font-weight:bold;}
.safe-box{background:#064e3b;}
</style>
</head>

<body>

<main class="max-w-4xl mx-auto p-4 md:p-8">

<header class="text-center mb-10">
<h1 class="text-4xl font-extrabold text-indigo-400">ðŸ›¡ ScamSentinel Gemini</h1>
<p class="text-slate-400">AI-powered scam & phishing detector</p>
</header>

<!-- Language -->
<select id="lang" class="mb-4 p-2 rounded bg-slate-800">
<option value="en">English</option>
<option value="fr">FranÃ§ais</option>
<option value="am">áŠ áˆ›áˆ­áŠ›</option>
</select>

<!-- Input -->
<div class="glass p-6 rounded-xl mb-6">

<textarea id="userInput" rows="5"
class="w-full p-4 rounded bg-slate-900 border border-slate-700"
placeholder="Paste message here..."></textarea>

<button id="checkBtn"
class="w-full mt-4 bg-indigo-600 hover:bg-indigo-500 py-3 rounded-xl font-bold">
Check Message
</button>

<div id="loader" class="hidden mt-3 text-center animate-spin">ðŸ”„</div>

</div>

<!-- Examples -->
<div class="flex gap-3 mb-6 flex-wrap">
<button onclick="fillExample(0)" class="bg-slate-700 px-3 py-1 rounded">Scam</button>
<button onclick="fillExample(1)" class="bg-slate-700 px-3 py-1 rounded">Normal</button>
<button onclick="fillExample(2)" class="bg-slate-700 px-3 py-1 rounded">Phishing</button>
</div>

<!-- Results -->
<div id="resultsTimeline" class="space-y-6"></div>

<footer class="text-center text-slate-500 mt-10">
Messages are analyzed in real-time and not stored.
</footer>

</main>

<script>
const API_KEY = "YOUR_GEMINI_API_KEY";

const examples=[
"Send money now or your account will be closed.",
"Hello team, our meeting is tomorrow at 10 AM.",
"Verify your bank here: http://fakebank-login.com"
];

function fillExample(i){
 document.getElementById("userInput").value=examples[i];
}

document.getElementById("checkBtn").addEventListener("click",analyze);

async function analyze(){
 const text=document.getElementById("userInput").value.trim();
 if(!text) return;

 const btn=document.getElementById("checkBtn");
 btn.disabled=true;
 document.getElementById("loader").classList.remove("hidden");

 try{
   const data=await analyzeWithGemini(text);
   displayResult(data,text);
   document.getElementById("userInput").value="";
 }catch(e){
   alert("API Error. Check key.");
 }

 btn.disabled=false;
 document.getElementById("loader").classList.add("hidden");
}

async function analyzeWithGemini(message){

const prompt=`
Analyze this message and return JSON with:

riskLevel: Low, Medium, or High
confidence: number 0-100
summary
explanation
redFlags (array)
manipulationTechnique
saferVersion (rewrite safely)
safeNextSteps
followUpQuestion

Rules:
Low risk if normal reminders or greetings.
High risk if asking for money, passwords, or urgent threats.

Message:
${message}
`;

const res=await fetch(
"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key="+API_KEY,
{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
contents:[{parts:[{text:prompt}]}]
})
});

const json=await res.json();
return JSON.parse(json.candidates[0].content.parts[0].text);
}

function displayResult(data,original){

let highlighted=original;
data.redFlags.forEach(f=>{
const r=new RegExp(`(${f})`,"gi");
highlighted=highlighted.replace(r,'<span class="red-flag">$1</span>');
});

const card=document.createElement("div");
card.className="glass p-6 rounded-xl animate__animated animate__fadeInUp border-l-4 "+
(data.riskLevel==="High"?"border-red-500":
 data.riskLevel==="Medium"?"border-yellow-400":"border-green-400");

card.innerHTML=`
<div class="flex justify-between mb-3">
<span class="font-bold">${data.riskLevel} Risk</span>
<span>${data.confidence}% Confidence</span>
</div>

<p class="italic mb-3">Original:</p>
<p class="bg-black/30 p-3 rounded mb-4">${highlighted}</p>

<h3 class="font-bold text-lg">${data.summary}</h3>
<p class="mb-3">${data.explanation}</p>

<b>Red Flags</b>
<ul class="list-disc ml-5 mb-3">
${data.redFlags.map(f=>`<li>${f}</li>`).join("")}
</ul>

<b>Technique</b>
<p>${data.manipulationTechnique}</p>

<div class="safe-box p-4 rounded mt-4">
<b>Safer Version</b>
<p>${data.saferVersion}</p>
</div>

<p class="mt-3"><b>Next Steps:</b> ${data.safeNextSteps}</p>
<p class="text-blue-300 mt-2">Follow-up: ${data.followUpQuestion}</p>
`;

document.getElementById("resultsTimeline").prepend(card);
}
</script>

</body>
    </html>
