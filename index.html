<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ScamSentinel Gemini</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
<style>
body {
    margin: 0;
    padding: 0;
    font-family: 'Plus Jakarta Sans', sans-serif;
    background: #0f172a;
    color: white;
    min-height: 100vh;
}
.container {
    max-width: 900px;
    width: 100%;
    margin: auto;
    padding: 20px;
}
header {
    text-align: center;
    margin-bottom: 20px;
}
.glass {
    background: rgba(30, 41, 59, 0.8);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255,255,255,0.1);
    padding: 15px;
    border-radius: 12px;
    margin-bottom: 20px;
}
textarea {
    width: 100%;
    padding: 12px;
    border-radius: 12px;
    border: 1px solid #334155;
    background: rgba(30,41,59,0.6);
    color: white;
    font-size: 1rem;
    resize: vertical;
}
button {
    margin-top: 10px;
    padding: 12px;
    background: #6366f1;
    border: none;
    border-radius: 12px;
    font-weight: bold;
    cursor: pointer;
    color: white;
    width: 100%;
}
button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}
.timeline-item {
    margin-bottom: 20px;
    padding: 15px;
    border-left-width: 4px;
    border-radius: 12px;
    background: rgba(30,41,59,0.7);
}
.red-flag {
    color: #f43f5e;
    font-weight: bold;
}
.safe-box {
    background: rgba(5,150,105,0.2);
    border: 1px dashed #10b981;
    padding: 10px;
    border-radius: 8px;
    margin-top: 10px;
}
.lang-select {
    margin-top: 10px;
    padding: 5px 10px;
    border-radius: 8px;
    border: 1px solid #334155;
    background: rgba(30,41,59,0.6);
    color: white;
}
</style>
</head>
<body>
<div class="container">
<header>
    <h1 class="text-4xl font-extrabold text-indigo-400 mb-2">üõ°Ô∏è ScamSentinel Gemini</h1>
    <p class="text-slate-400 mb-2">Detect scams in messages safely and interactively</p>
    <select id="langSelect" class="lang-select">
        <option value="en" selected>English</option>
        <option value="fr">Fran√ßais</option>
        <option value="am">·ä†·àõ·à≠·äõ</option>
    </select>
</header>

<div class="glass">
    <textarea id="userInput" rows="4" placeholder="Paste the suspicious message here..."></textarea>
    <button id="checkBtn">Check for Scam</button>
</div>

<div id="resultsTimeline"></div>
</div>

<script>
// Multilingual translations
const translations = {
    en: { safeTitle: "üõ°Ô∏è Safer Version" },
    fr: { safeTitle: "üõ°Ô∏è Version S√©curis√©e" },
    am: { safeTitle: "üõ°Ô∏è ·ã∞·àÖ·äì ·ã®·â∞·âÄ·ã®·à® ·àò·àç·ä•·ä≠·âµ" }
};

const userInput = document.getElementById('userInput');
const checkBtn = document.getElementById('checkBtn');
const resultsTimeline = document.getElementById('resultsTimeline');
const langSelect = document.getElementById('langSelect');

// Mock Gemini API call
async function callGeminiAPI(input) {
    return new Promise(resolve => {
        setTimeout(() => {
            let isScam = input.toLowerCase().includes("money") || input.toLowerCase().includes("urgent");
            resolve({
                riskLevel: isScam ? "High" : "Low",
                summary: isScam ? "Potential scam detected" : "Message looks safe",
                explanation: isScam ? "This message may attempt to trick you into sending money." : "No scam indicators detected.",
                redFlags: isScam ? ["Request for money", "Urgent tone"] : [],
                manipulationTechnique: isScam ? "Social Engineering" : "None",
                safeNextSteps: isScam ? "Do not respond and block sender." : "No action needed.",
                saferVersion: isScam ? input.replace(/money/gi,"[redacted]") : input,
                followUpQuestion: isScam ? "Would you like to report this?" : "None"
            });
        }, 500);
    });
}

checkBtn.addEventListener('click', async () => {
    const text = userInput.value.trim();
    if (!text) return alert("Please enter a message!");
    checkBtn.disabled = true;

    const data = await callGeminiAPI(text);
    displayResult(data, text);
    userInput.value = '';
    checkBtn.disabled = false;

    // Scroll to the latest result
    setTimeout(() => window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' }), 100);
});

function displayResult(data, originalText) {
    let highlightedText = originalText;
    data.redFlags.forEach(flag => {
        const reg = new RegExp(`(${flag})`, "gi");
        highlightedText = highlightedText.replace(reg, '<span class="red-flag">$1</span>');
    });

    const riskColor = data.riskLevel === "High" ? "border-red-500" : data.riskLevel === "Medium" ? "border-yellow-500" : "border-green-500";
    const card = document.createElement('div');
    card.className = "timeline-item " + riskColor;
    card.innerHTML = `
        <div class="mb-2 text-sm text-slate-400">${new Date().toLocaleTimeString()}</div>
        <div class="mb-2"><strong>Original Message:</strong><br>${highlightedText}</div>
        <h3 class="text-xl font-bold mb-1">${data.summary} (${data.riskLevel})</h3>
        <p class="mb-2 text-slate-300">${data.explanation}</p>
        <div class="mb-2"><strong>Red Flags:</strong> <span class="red-flag">${data.redFlags.join(", ")}</span></div>
        <div class="mb-2"><strong>Technique:</strong> ${data.manipulationTechnique}</div>
        <div class="safe-box"><strong>${translations[langSelect.value].safeTitle}:</strong><br>${data.saferVersion}</div>
        <div class="mt-2 text-sm text-blue-300"><strong>Next Steps:</strong> ${data.safeNextSteps}</div>
        <div class="mt-1 text-xs text-slate-500"><strong>Follow-up:</strong> ${data.followUpQuestion}</div>
    `;
    resultsTimeline.insertBefore(card, resultsTimeline.firstChild);
}
</script>
</body>
</html>
